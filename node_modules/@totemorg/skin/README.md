# [SKIN](https://www.npmjs.com/package/@totemorg/skin)

**SKIN** provides a:

	renderSkin(req,res)

endpoint to render notebooks, datasets and dynamic jade for requested notebook/table/engine.
Supports client-side blogging with [TOTEM markdown](/api.view).

## Manage

	npm install @totemstan/skin		# Install
	npm run start [ ? | $ | ...]	# Unit test
	npm run verminor				# Roll minor version
	npm run vermajor				# Roll major version
	npm run redoc					# Regen documentation

## Usage

Acquire and optionally configure **SKIN**:
	
	const SKIN = require("skin").config({
		key: value, 						// set key
		"key.key": value, 					// indexed set
		"key.key.": value					// indexed append
	});

where configuration keys follow [ENUMS deep copy conventions](https://www.npmjs.com/package/@totemorg/enums).

## Program Reference
<details>
<summary>
<i>Open/Close</i>
</summary>
<a name="module_SKIN"></a>

## SKIN
Provides an endpoint to render [DEBE](https://github.com/totemstan/debe) notebooks, datasets, and 
engines using the (possibly dynamically generated) jade associated with the requested 
notebook/table/engine.  Converts [TOTEM markdown](/api.view) to html.  This module 
documented in accordance with [jsdoc](https://jsdoc.app/).

**Requires**: <code>module:[enums](https://github.com/totemstan/enums)</code>, <code>module:[fs](https://nodejs.org/docs/latest/api/)</code>, <code>module:[cluster](https://nodejs.org/docs/latest/api/)</code>, <code>module:[jade@1.9.0](https://www.npmjs.com/package/jade)</code>  
**Author**: [ACMESDS](https://totemstan.github.io)  

* [SKIN](#module_SKIN)
    * _static_
        * [.skinContext(req, cb)](#module_SKIN.skinContext)
        * [.renderJade(jade, ctx, cb)](#module_SKIN.renderJade)
        * [.renderSkin(req, res)](#module_SKIN.renderSkin)
    * _inner_
        * [~blog(ctx, cb)](#module_SKIN..blog)
        * [~blogify(ctx, src, rec, cb)](#module_SKIN..blogify)

<a name="module_SKIN.skinContext"></a>

### SKIN.skinContext(req, cb)
Callback cb with skinning context ctx for requested table.

**Kind**: static method of [<code>SKIN</code>](#module_SKIN)  

| Param | Type | Description |
| --- | --- | --- |
| req | <code>Object</code> | Totem request |
| cb | <code>function</code> | callback(ctx) |

<a name="module_SKIN.renderJade"></a>

### SKIN.renderJade(jade, ctx, cb)
Render jade string to callback cb( err || html ) in a new context created for 
this request.

**Kind**: static method of [<code>SKIN</code>](#module_SKIN)  

| Param | Type | Description |
| --- | --- | --- |
| jade | <code>String</code> | contents to render |
| ctx | <code>Object</code> | skinning context |
| cb | <code>function</code> | callback(ctx) |

<a name="module_SKIN.renderSkin"></a>

### SKIN.renderSkin(req, res)
Endpoint to render req.table using associated jade engine.

**Kind**: static method of [<code>SKIN</code>](#module_SKIN)  

| Param | Type | Description |
| --- | --- | --- |
| req | <code>Object</code> | Totem request |
| res | <code>function</code> | Totem response |

<a name="module_SKIN..blog"></a>

### SKIN~blog(ctx, cb)
Short form of blogify.

**Kind**: inner method of [<code>SKIN</code>](#module_SKIN)  

| Param | Type | Description |
| --- | --- | --- |
| ctx | <code>Object</code> | initial blogging context |
| cb | <code>function</code> | callback accepting the resulting html |

<a name="module_SKIN..blogify"></a>

### SKIN~blogify(ctx, src, rec, cb)
Expands markdown:

	$ VIEW { SRC ? w=WIDTH & h=HEIGHT & x=KEY$INDEX & y=KEY$INDEX ... }  
	$ { JS }   
	[ LINK ] ( URL )  
	$ $ inline TeX $ $ || n$ $ break TeX $ $ || a$ $ AsciiMath $ $ || m$ $ MathML $ $
	TeX := TeX || #VAR || VAR#KEY#KEY...
	# SECTION  
	ESCAPE || $with || $for || $if:\\n \\t BLOCK \\n

to html.

**Kind**: inner method of [<code>SKIN</code>](#module_SKIN)  

| Param | Type | Description |
| --- | --- | --- |
| ctx | <code>Object</code> | initial blogging context |
| src | <code>String</code> | default source path |
| rec | <code>Object</code> | source record |
| cb | <code>function</code> | callback accepting the resulting html |

</details>

## Contacting, Contributing, Following

Feel free to 
* submit and status [TOTEM issues](http://totem.hopto.org/issues.view) 
* contribute to [TOTEM notebooks](http://totem.hopto.org/shares/notebooks/) 
* revise [TOTEM requirements](http://totem.hopto.org/reqts.view) 
* browse [TOTEM holdings](http://totem.hopto.org/) 
* or follow [TOTEM milestones](http://totem.hopto.org/milestones.view) 


## License

[MIT](LICENSE)

* * *

&copy; 2012 ACMESDS
